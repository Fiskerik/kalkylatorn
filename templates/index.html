<!DOCTYPE html>
<html lang="sv">
<head>
    <meta charset="UTF-8">
    <title>F칬r칛ldrapenningskalkylator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>游놌 F칬r칛ldrapenningskalkylator</h1>

    <form method="POST">
        <label for="parent">V칛lj f칬r칛lder:</label>
        <select name="parent" id="parent">
            <option value="F칬r칛lder 1">F칬r칛lder 1</option>
            <option value="F칬r칛lder 2">F칬r칛lder 2</option>
        </select>

        <label for="income">칀rsinkomst (brutto):</label>
        <input type="number" name="income" id="income" required>

        <label for="days_80">Antal dagar p친 80%-niv친 (max 390):</label>
        <input type="number" name="days_80" id="days_80" max="390" required>

        <label for="days_180">Antal dagar p친 l칛gstaniv친 (max 90):</label>
        <input type="number" name="days_180" id="days_180" max="90" required>

        <button type="submit">游눯 Ber칛kna</button>
    </form>

    {% if result %}
    <section class="result">
        <h2>游늵 Resultat f칬r {{ result.parent }}</h2>
        <p><strong>Ers칛ttning per dag (80%):</strong> {{ result.sgi_per_day }} kr</p>
        <p><strong>{{ result.dagar_80 }} dagar</strong> p친 80%-niv친: {{ result.ers_80 | round }} kr</p>
        <p><strong>{{ result.dagar_180 }} dagar</strong> p친 l칛gstaniv친: {{ result.ers_180 }} kr</p>
        <p><strong>Total ers칛ttning:</strong> {{ result.total | round }} kr</p>
        <p><strong>Kvarvarande dagar:</strong> {{ result.remaining }} / 480</p>

        <canvas id="chart" width="400" height="200"></canvas>
        <script>
            const ctx = document.getElementById('chart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['80%-niv친', 'L칛gstaniv친'],
                    datasets: [{
                        label: 'Ers칛ttning (kr)',
                        data: [{{ result.ers_80 | round(2) }}, {{ result.ers_180 | round(2) }}],
                        backgroundColor: ['#4CAF50', '#2196F3']
                    }]
                },
                options: {
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        </script>
    </section>
    {% endif %}
</body>
</html>
